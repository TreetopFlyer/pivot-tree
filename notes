ProcessLeaves loops over all sums. That should be changed so its only on a specified array of sums.
